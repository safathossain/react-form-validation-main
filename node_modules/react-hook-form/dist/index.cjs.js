"use strict";function e(e){if(e&&e.__esModule)return e;var r=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}})),r.default=e,Object.freeze(r)}Object.defineProperty(exports,"__esModule",{value:!0});var r=e(require("react")),t=e=>"checkbox"===e.type,n=e=>null==e;const s=e=>"object"==typeof e;var c=e=>!n(e)&&!Array.isArray(e)&&s(e)&&!(e instanceof Date),u=e=>e.substring(0,e.search(/.\d/))||e,i=(e,r)=>[...e].some(e=>u(r)===e),a=e=>e.filter(Boolean),l=e=>void 0===e,o=(e={},r,t)=>{const s=a(r.split(/[,[\].]+?/)).reduce((e,r)=>n(e)?e:e[r],e);return l(s)||s===e?l(e[r])?t:e[r]:s};const f="blur",d="change",b="onBlur",y="onChange",g="onSubmit",m="onTouched",h="all",v="max",x="min",p="maxLength",A="minLength",O="pattern",j="required",k="validate";var V=(e,r)=>{const t=Object.assign({},e);return delete t[r],t};const R=r.createContext(null);R.displayName="RHFContext";const F=()=>r.useContext(R);var S=(e,r,t,n,s=!0)=>e?new Proxy(r,{get:(e,r)=>{if(r in e)return t.current[r]!==h&&(t.current[r]=!s||h),n&&(n.current[r]=!0),e[r]}}):r,w=e=>c(e)&&!Object.keys(e).length,_=(e,r,t)=>w(e)||Object.keys(e).length>=Object.keys(r).length||Object.keys(e).find(e=>r[e]===(!t||h)),C="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;const D=C?"Proxy"in window:"undefined"!=typeof Proxy;function E(e){const t=F(),{formStateRef:n,formStateSubjectRef:s,readFormStateRef:c}=e&&e.control||t.control,[u,i]=r.useState(n.current),a=r.useRef({isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1});return r.useEffect(()=>{const e=s.current.subscribe({next:e=>{_(e,a.current)&&i(Object.assign(Object.assign({},n.current),e))}});return()=>e.unsubscribe()},[]),S(D,u,c,a,!1)}function B({name:e,rules:n,defaultValue:s,control:u,shouldUnregister:a}){const b=F(),{defaultValuesRef:y,register:g,fieldsRef:m,unregister:h,fieldArrayNamesRef:v,controllerSubjectRef:x,shouldUnmountUnregister:p}=u||b.control,{onChange:A,onBlur:O,ref:j}=g(e,n),[k,V]=r.useState(l(o(m.current,e)._f.value)||i(v.current,e)?l(s)?o(y.current,e):s:o(m.current,e)._f.value),R=E({control:u||b.control});return o(m.current,e)._f.value=k,r.useEffect(()=>{const r=x.current.subscribe({next:r=>(!r.name||e===r.name)&&V(o(r.values,e))});return()=>{r.unsubscribe(),(p||a)&&h(e)}},[e]),{field:{onChange:r=>{const n=(e=>c(e)&&e.target?t(e.target)?e.target.checked:e.target.value:e)(r);V(n),A({target:{value:n,name:e},type:d})},onBlur:()=>{O({target:{name:e},type:f})},name:e,value:k,ref:e=>e&&j(e)},formState:R,fieldState:Object.defineProperties({},{invalid:{get:()=>!!o(R.errors,e)},isDirty:{get:()=>!!o(R.dirtyFields,e)},isTouched:{get:()=>!!o(R.touchedFields,e)},error:{get:()=>o(R.errors,e)}})}}var N=(e,r,t,n,s)=>r?Object.assign(Object.assign({},t[e]),{types:Object.assign(Object.assign({},t[e]&&t[e].types?t[e].types:{}),{[n]:s||!0})}):{},$=e=>/^\w*$/.test(e),M=e=>a(e.replace(/["|']|\]/g,"").split(/\.|\[/));function I(e,r,t){let n=-1;const s=$(r)?[r]:M(r),u=s.length,i=u-1;for(;++n<u;){const r=s[n];let u=t;if(n!==i){const t=e[r];u=c(t)||Array.isArray(t)?t:isNaN(+s[n+1])?{}:[]}e[r]=u,e=e[r]}return e}const P=(e,r,t)=>{for(const n of t||Object.keys(e)){const t=o(e,n);if(t){const e=t._f,n=V(t,"_f");if(e&&r(e.name)){if(e.ref.focus&&l(e.ref.focus()))break;if(e.refs){e.refs[0].focus();break}}else c(n)&&P(n,r)}}},T=(e,r,t={})=>{for(const n in e.current){const s=e.current[n];if(s){const e=s._f,c=V(s,"_f");I(t,n,e?e.ref.disabled||e.refs&&e.refs.every(e=>e.disabled)?void 0:e.value:Array.isArray(s)?[]:{}),c&&T({current:c},r,t[n])}}return Object.assign(Object.assign({},r),t)};var U=()=>{const e="undefined"==typeof performance?Date.now():1e3*performance.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{const t=(16*Math.random()+e)%16|0;return("x"==r?t:3&t|8).toString(16)})},W=(e=[],r)=>e.map(e=>Object.assign({[r]:e&&e[r]||U()},e)),L=e=>n(e)||!s(e);function q(e,t,n){if(L(e)||L(t)||e instanceof Date||t instanceof Date)return e===t;if(!r.isValidElement(e)){const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(const s of r){const r=e[s];if(!n||"ref"!==s){const e=t[s];if((c(r)||Array.isArray(r))&&(c(e)||Array.isArray(e))?!q(r,e,n):r!==e)return!1}}}return!0}function H(e,r,t,n,s){let c=-1;for(;++c<e.length;){for(const n in e[c])Array.isArray(e[c][n])?(!t[c]&&(t[c]={}),t[c][n]=[],H(e[c][n],o(r[c]||{},n,[]),t[c][n],t[c],n)):q(o(r[c]||{},n),e[c][n])?I(t[c]||{},n):t[c]=Object.assign(Object.assign({},t[c]),{[n]:!0});n&&!t.length&&delete n[s]}return t}var z=(e,r,t)=>function e(r,t){if(L(r)||L(t))return t;for(const n in t){const s=r[n],u=t[n];try{r[n]=c(s)&&c(u)||Array.isArray(s)&&Array.isArray(u)?e(s,u):u}catch(e){}}return r}(H(e,r,t.slice(0,e.length)),H(r,e,t.slice(0,e.length)));function G(e,r){return[...e,...Array.isArray(r)?r:[r]]}var J=e=>Array.isArray(e)?Array(e.length).fill(void 0):void 0;function K(e,r,t){return[...e.slice(0,r),...Array.isArray(t)?t:[t],...e.slice(r)]}var Q=(e,r,t)=>Array.isArray(e)?(l(e[t])&&(e[t]=void 0),e.splice(t,0,e.splice(r,1)[0]),e):[];function X(e,r){return[...Array.isArray(r)?r:[r],...e]}var Y=(e,r)=>l(r)?[]:function(e,r){let t=0;const n=[...e];for(const e of r)n.splice(e-t,1),t++;return a(n).length?n:[]}(e,(Array.isArray(r)?r:[r]).sort((e,r)=>e-r)),Z=(e,r,t)=>{e[r]=[e[t],e[t]=e[r]][0]},ee=e=>"boolean"==typeof e;function re(e,r){const t=$(r)?[r]:M(r),n=1==t.length?e:function(e,r){const t=r.slice(0,-1).length;let n=0;for(;n<t;)e=l(e)?n++:e[r[n++]];return e}(e,t),s=t[t.length-1];let u;n&&delete n[s];for(let r=0;r<t.slice(0,-1).length;r++){let n,s=-1;const i=t.slice(0,-(r+1)),a=i.length-1;for(r>0&&(u=e);++s<i.length;){const r=i[s];n=n?n[r]:e[r],a===s&&(c(n)&&w(n)||Array.isArray(n)&&!n.filter(e=>c(e)&&!w(e)||ee(e)).length)&&(u?delete u[r]:delete e[r]),u=n}}return e}function te(e,r){const t={};for(const n of e){const e=o(r,n);e&&($(n)?t[n]=e._f:I(t,n,e._f))}return t}var ne=e=>"file"===e.type,se=e=>"select-multiple"===e.type,ce=e=>"radio"===e.type;const ue={value:!1,isValid:!1},ie={value:!0,isValid:!0};var ae=e=>{if(Array.isArray(e)){if(e.length>1){const r=e.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:r,isValid:!!r.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!l(e[0].attributes.value)?l(e[0].value)||""===e[0].value?ie:{value:e[0].value,isValid:!0}:ie:ue}return ue},le=(e,{valueAsNumber:r,valueAsDate:t,setValueAs:n})=>r?""===e?NaN:+e:t?new Date(e):n?n(e):e;const oe={isValid:!1,value:null};var fe=e=>Array.isArray(e)?e.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,oe):oe;function de(e){if(e&&e._f){const n=e._f.ref;if(n.disabled)return;return ne(n)?n.files:ce(n)?fe(e._f.refs).value:se(n)?(r=n.options,[...r].filter(({selected:e})=>e).map(({value:e})=>e)):t(n)?ae(e._f.refs).value:le(l(n.value)?e._f.ref.value:n.value,e._f)}var r}var be=e=>e&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),ye=e=>"function"==typeof e,ge=e=>"string"==typeof e,me=e=>ge(e)||r.isValidElement(e),he=e=>e instanceof RegExp;function ve(e,r,t="validate"){if(me(e)||ee(e)&&!e)return{type:t,message:me(e)?e:"",ref:r}}var xe=e=>c(e)&&!he(e)?e:{value:e,message:""},pe=async({_f:{ref:e,refs:r,required:s,maxLength:u,minLength:i,min:a,max:l,pattern:o,validate:f,name:d,value:b,valueAsNumber:y}},g)=>{const m={},h=ce(e),V=t(e),R=h||V,F=(y||ne(e))&&!e.value||""===b||Array.isArray(b)&&!b.length,S=N.bind(null,d,g,m),_=(r,t,n,s=p,c=A)=>{const u=r?t:n;m[d]=Object.assign({type:r?s:c,message:u,ref:e},S(r?s:c,u))};if(s&&(!h&&!V&&(F||n(b))||ee(b)&&!b||V&&!ae(r).isValid||h&&!fe(r).isValid)){const{value:t,message:n}=me(s)?{value:!!s,message:s}:xe(s);if(t&&(m[d]=Object.assign({type:j,message:n,ref:R?(r||[])[0]||{}:e},S(j,n)),!g))return m}if(!(n(a)&&n(l)||""===b)){let r,t;const s=xe(l),c=xe(a);if(isNaN(b)){const n=e.valueAsDate||new Date(b);ge(s.value)&&(r=n>new Date(s.value)),ge(c.value)&&(t=n<new Date(c.value))}else{const u=e.valueAsNumber||parseFloat(b);n(s.value)||(r=u>s.value),n(c.value)||(t=u<c.value)}if((r||t)&&(_(!!r,s.message,c.message,v,x),!g))return m}if(ge(b)&&!F&&(u||i)){const e=xe(u),r=xe(i),t=!n(e.value)&&b.length>e.value,s=!n(r.value)&&b.length<r.value;if((t||s)&&(_(t,e.message,r.message),!g))return m}if(ge(b)&&o&&!F){const{value:r,message:t}=xe(o);if(he(r)&&!b.match(r)&&(m[d]=Object.assign({type:O,message:t,ref:e},S(O,t)),!g))return m}if(f){const t=R&&r?r[0]:e;if(ye(f)){const e=ve(await f(b),t);if(e&&(m[d]=Object.assign(Object.assign({},e),S(k,e.message)),!g))return m}else if(c(f)){let e={};for(const[r,n]of Object.entries(f)){if(!w(e)&&!g)break;const s=ve(await n(b),t,r);s&&(e=Object.assign(Object.assign({},s),S(r,s.message)),g&&(m[d]=e))}if(!w(e)&&(m[d]=Object.assign({ref:t},e),!g))return m}}return m},Ae=e=>({isOnSubmit:!e||e===g,isOnBlur:e===b,isOnChange:e===y,isOnAll:e===h,isOnTouch:e===m}),Oe=e=>e instanceof HTMLElement;class je{constructor(){this.tearDowns=[]}add(e){this.tearDowns.push(e)}unsubscribe(){for(const e of this.tearDowns)e();this.tearDowns=[]}}class ke{constructor(e,r){this.observer=e,this.closed=!1,r.add(()=>this.closed=!0)}next(e){this.closed||this.observer.next(e)}}class Ve{constructor(){this.observers=[]}next(e){for(const r of this.observers)r.next(e)}subscribe(e){const r=new je,t=new ke(e,r);return this.observers.push(t),r}unsubscribe(){this.observers=[]}}const Re="undefined"==typeof window;exports.Controller=e=>e.render(B(e)),exports.FormProvider=e=>r.createElement(R.Provider,{value:V(e,"children")},e.children),exports.appendErrors=N,exports.get=o,exports.set=I,exports.useController=B,exports.useFieldArray=({control:e,name:t,keyName:n="id",shouldUnregister:s})=>{const c=F(),i=r.useRef(""),{isWatchAllRef:f,watchFieldsRef:d,getIsDirty:b,watchSubjectRef:y,fieldArraySubjectRef:g,fieldArrayNamesRef:m,fieldsRef:h,defaultValuesRef:v,formStateRef:x,formStateSubjectRef:p,readFormStateRef:A,validFieldsRef:O,fieldsWithValidationRef:j,fieldArrayDefaultValuesRef:k,unregister:R,shouldUnmountUnregister:S}=e||c.control,[w,_]=r.useState(W(o(k.current,u(t))?o(k.current,t,[]):o(v.current,t,[]),n));I(k.current,t,[...w]),m.current.add(t);const C=e=>e.map(e=>V(e||{},n)),D=()=>{const e=o(T(h,v.current),t,[]);return W(o(k.current,t,[]).map((r,t)=>Object.assign(Object.assign({},r),e[t])),n)},E=(e,r)=>r?l(r.focusIndex)?r.focusName?r.focusName:r.shouldFocus?`${t}.${e}`:"":`${t}.${r.focusIndex}`:`${t}.${e}`,B=(e=[])=>_(W(e,n)),N=e=>!a(o(e,t,[])).length&&re(e,t),$=(e,r,n=[],s=!0)=>{if(o(h.current,t)){const n=e(o(h.current,t),r.argA,r.argB);s&&I(h.current,t,n)}if(Array.isArray(o(x.current.errors,t))){const n=e(o(x.current.errors,t),r.argA,r.argB);s&&I(x.current.errors,t,n),N(x.current.errors)}if(A.current.touchedFields&&o(x.current.touchedFields,t)){const n=e(o(x.current.touchedFields,t),r.argA,r.argB);s&&I(x.current.touchedFields,t,n),N(x.current.touchedFields)}(A.current.dirtyFields||A.current.isDirty)&&(I(x.current.dirtyFields,t,z(C(n),o(v.current,t,[]),o(x.current.dirtyFields,t,[]))),(e=>{e&&I(x.current.dirtyFields,t,z(C(e),o(v.current,t,[]),o(x.current.dirtyFields,t,[])))})(n),N(x.current.dirtyFields)),A.current.isValid&&(I(O.current,t,e(o(O.current,t,[]),r.argA)),N(O.current),I(j.current,t,e(o(j.current,t,[]),r.argA)),N(j.current)),p.current.next({isDirty:b(t,C(n)),errors:x.current.errors,isValid:x.current.isValid})},M=(e,r=0,n="")=>e.forEach((e,s)=>!L(e)&&Object.entries(e).forEach(([e,c])=>{const u=`${n||t}.${n?s:r+s}.${e}`;Array.isArray(c)?M(c,s,u):I(h.current,u,{_f:{ref:{name:u},name:u,value:c}})}));return r.useEffect(()=>{if(f.current)p.current.next({});else for(const e of d.current)if(t.startsWith(e)){p.current.next({});break}y.current.next({name:t,value:o(T(h,v.current),t,[])}),i.current&&P(h.current,e=>e.startsWith(i.current)),i.current="",g.current.next({name:t,fields:C([...w])})},[w,t]),r.useEffect(()=>{const e=g.current.subscribe({next({name:e,fields:r,isReset:n}){n&&(re(h.current,e||t),e?I(k.current,e,r):k.current=r,B(o(k.current,t)))}});return!o(h.current,t)&&I(h.current,t,[]),()=>{e.unsubscribe(),(S||s)&&R(t)}},[]),{swap:r.useCallback((e,r)=>{const t=D();Z(t,e,r),$(Z,{argA:e,argB:r},t,!1),B(t)},[t]),move:r.useCallback((e,r)=>{const t=D();Q(t,e,r),B(t),$(Q,{argA:e,argB:r},t,!1)},[t]),prepend:r.useCallback((e,r)=>{const t=Array.isArray(e)?e:[e],n=X(D(),t);B(n),$(X,{argA:J(e)},n),M(t),i.current=E(0,r)},[t]),append:r.useCallback((e,r)=>{const t=Array.isArray(e)?e:[e],n=G(D(),t),s=n.length-t.length;B(n),$(G,{argA:J(e)},n,!1),M(t,s),i.current=E(s,r)},[t]),remove:r.useCallback(e=>{const r=Y(D(),e);(e=>{(Array.isArray(e)?e:[e]).forEach(e=>I(h.current,`${t}${l(e)?"":"."+e}`,l(e)?[]:void 0))})(e),B(r),$(Y,{argA:e},r)},[t]),insert:r.useCallback((e,r,t)=>{const n=Array.isArray(r)?r:[r],s=K(D(),e,n);B(s),$(K,{argA:e,argB:J(r)},s),M(n,e),i.current=E(e,t)},[t]),fields:w}},exports.useForm=function({mode:e=g,reValidateMode:s=y,resolver:c,context:d,defaultValues:b={},shouldFocusError:m=!0,shouldUnregister:v,criteriaMode:x}={}){const p=r.useRef({}),A=r.useRef(new Set),O=r.useRef(new Ve),j=r.useRef(new Set),k=r.useRef(new Ve),R=r.useRef(new Ve),F=r.useRef(new Ve),E=r.useRef({}),B=r.useRef(new Set),N=r.useRef(!1),$=r.useRef({}),M=r.useRef({}),U=r.useRef(b),W=r.useRef(!1),L=r.useRef(d),H=r.useRef(c),G=r.useRef(new Set),J=Ae(e),K=x===h,[Q,X]=r.useState({isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!J.isOnSubmit,errors:{}}),Y=r.useRef({isDirty:!D,dirtyFields:!D,touchedFields:!D,isValidating:!D,isValid:!D,errors:!D}),Z=r.useRef(Q);L.current=d,H.current=c;const ee=()=>Z.current.isValid=q(M.current,$.current)&&w(Z.current.errors),ue=r.useCallback((e,r,t=!1,s={},c,u)=>{const i=o(Z.current.errors,e);let a=t||!q(i,r,!0)||Y.current.isValid&&l(r)&&o($.current,e)&&!o(M.current,e);if(r?(re(M.current,e),a=a||!i||!q(i,r,!0),I(Z.current.errors,e,r)):((o($.current,e)||H.current)&&(I(M.current,e,!0),a=a||i),re(Z.current.errors,e)),a&&!n(t)||!w(s)||u){const e=Object.assign(Object.assign({},s),{isValid:H.current?!!c:ee(),errors:Z.current.errors});Z.current=Object.assign(Object.assign({},Z.current),e),O.current.next(u?{}:e)}O.current.next({isValidating:!1})},[]),ie=r.useCallback((e,r,s={},c,u)=>{u&&De(e);const i=o(p.current,e,{})._f;if(i){const u=C&&Oe(i.ref)&&n(r)?"":r;if(i.value=le(r,i),ce(i.ref)?(i.refs||[]).forEach(e=>e.checked=e.value===u):ne(i.ref)&&!ge(u)?i.ref.files=u:se(i.ref)?[...i.ref.options].forEach(e=>e.selected=u.includes(e.value)):t(i.ref)&&i.refs?i.refs.length>1?i.refs.forEach(e=>e.checked=Array.isArray(u)?!!u.find(r=>r===e.value):u===e.value):i.refs[0].checked=!!u:i.ref.value=u,c){const t=T(p);I(t,e,r),R.current.next({values:Object.assign(Object.assign({},U.current),t),name:e})}s.shouldDirty&&oe(e,u),s.shouldValidate&&ve(e)}},[]),ae=r.useCallback((e,r)=>{const t=T(p);return e&&r&&I(t,e,r),!q(t,U.current)},[]),oe=r.useCallback((e,r,t=!0)=>{if(Y.current.isDirty||Y.current.dirtyFields){const n=!q(o(U.current,e),r),s=o(Z.current.dirtyFields,e),c=Z.current.isDirty;n?I(Z.current.dirtyFields,e,!0):re(Z.current.dirtyFields,e),Z.current.isDirty=ae();const u={isDirty:Z.current.isDirty,dirtyFields:Z.current.dirtyFields},i=Y.current.isDirty&&c!==u.isDirty||Y.current.dirtyFields&&s!==o(Z.current.dirtyFields,e);return i&&t&&O.current.next(u),i?u:{}}return{}},[]),fe=r.useCallback(async(e,r)=>{const t=(await pe(o(p.current,e),K))[e];return ue(e,t,r),l(t)},[K]),me=r.useCallback(async(e,r=[])=>{const{errors:t}=await H.current(T(p,v?{}:U.current),L.current,{criteriaMode:x,names:r,fields:te(A.current,p.current)});for(const r of e){const e=o(t,r);e?I(Z.current.errors,r,e):re(Z.current.errors,r)}return t},[x]),he=async e=>{for(const r in e){const t=e[r];if(t){const e=t._f,r=V(t,"_f");if(e){const r=await pe(t,K);r[e.name]?(I(Z.current.errors,e.name,r[e.name]),re(M.current,e.name)):o($.current,e.name)&&(I(M.current,e.name,!0),re(Z.current.errors,e.name))}r&&await he(r)}}},ve=r.useCallback(async e=>{const r=l(e)?Object.keys(p.current):Array.isArray(e)?e:[e];let t;return O.current.next({isValidating:!0}),t=H.current?w(await me(r,l(e)?void 0:r)):!!(l(e)?await he(p.current):(await Promise.all(r.filter(e=>o(p.current,e)).map(async e=>await fe(e,null)))).every(Boolean)),O.current.next({errors:Z.current.errors,isValidating:!1,isValid:H.current?t:ee()}),t},[me,fe]),xe=r.useCallback((e,r,t)=>Object.entries(r).forEach(([r,n])=>{const s=`${e}.${r}`,c=o(p.current,s);c&&!c._f?xe(s,n,t):ie(s,n,t,!0,!c)}),[ve]),je=e=>W.current||B.current.has(e)||B.current.has((e.match(/\w+/)||[])[0]),ke=(e,r,t,n)=>{const s=o(p.current,e),c=l(s._f.value)?o(U.current,e):s._f.value;return s&&!l(c)&&(t&&t.defaultChecked?s._f.value=de(s):i(G.current,e)?s._f.value=c:ie(e,c)),(!l(c)||n)&&be(r)&&!J.isOnSubmit&&s&&Y.current.isValid&&pe(s,K).then(r=>{w(r)?I(M.current,e,!0):re(M.current,e),Z.current.isValid!==ee()&&X(Object.assign(Object.assign({},Z.current),{isValid:ee()}))}),c},Fe=r.useCallback(async({type:e,target:r,target:{value:n,type:c}})=>{let i,a,d=r.name;const b=o(p.current,d);if(b){let y=c?de(b):void 0;y=l(y)?n:y;const g=e===f,{isOnBlur:m,isOnChange:h}=Ae(s),A=!be(b._f)&&!H.current&&!o(Z.current.errors,d)||(({isOnBlur:e,isOnChange:r,isOnTouch:t,isTouched:n,isReValidateOnBlur:s,isReValidateOnChange:c,isBlurEvent:u,isSubmitted:i,isOnAll:a})=>!a&&(!i&&t?!(n||u):(i?s:e)?!u:!(i?c:r)||u))(Object.assign({isBlurEvent:g,isTouched:!!o(Z.current.touchedFields,d),isSubmitted:Z.current.isSubmitted,isReValidateOnBlur:m,isReValidateOnChange:h},J)),j=!g&&je(d);l(y)||(b._f.value=y);const V=oe(d,b._f.value,!1);g&&!o(Z.current.touchedFields,d)&&(I(Z.current.touchedFields,d,!0),Y.current.touchedFields&&(V.touchedFields=Z.current.touchedFields));let R=!w(V)||j;if(A)return!g&&k.current.next({name:d,type:e,value:y}),R&&O.current.next(j?{}:V);if(O.current.next({isValidating:!0}),H.current){const{errors:e}=await H.current(T(p,v?{}:U.current),L.current,{criteriaMode:x,fields:te([d],p.current),names:[d]}),n=Z.current.isValid;if(i=o(e,d),t(r)&&!i){const r=u(d),t=o(e,r,{});t.type&&t.message&&(i=t),(t||o(Z.current.errors,r))&&(d=r)}a=w(e),n!==a&&(R=!0)}else i=(await pe(b,K))[d];!g&&k.current.next({name:d,type:e,value:y}),ue(d,i,R,V,a,j)}},[]),Se=r.useCallback(async(e={})=>{const r=Z.current.isValid;if(c){const{errors:r}=await H.current(Object.assign(Object.assign({},T(p,v?{}:U.current)),e),L.current,{criteriaMode:x,fields:te(A.current,p.current)});Z.current.isValid=w(r)}else ee();r!==Z.current.isValid&&O.current.next({isValid:Z.current.isValid})},[x]),we=r.useCallback((e,r,t)=>{const n=Array.isArray(e),s=N.current?T(p,U.current):l(r)?U.current:n?r||{}:{[e]:r};if(l(e))return t&&(W.current=!0),s;const c=[];for(const r of n?e:[e])t&&B.current.add(r),c.push(o(s,r));return n?c:c[0]},[]),_e=(e,r={})=>{for(const t of e?Array.isArray(e)?e:[e]:Object.keys(A.current))A.current.delete(t),G.current.delete(t),o(p.current,t)&&(r.keepIsValid||(re($.current,t),re(M.current,t)),!r.keepError&&re(Z.current.errors,t),!r.keepValue&&re(p.current,t),!r.keepDirty&&re(Z.current.dirtyFields,t),!r.keepTouched&&re(Z.current.touchedFields,t),!v&&!r.keepDefaultValue&&re(U.current,t),k.current.next({name:t}));O.current.next(Object.assign(Object.assign(Object.assign({},Z.current),r.keepDirty?{isDirty:ae()}:{}),H.current?{}:{isValid:ee()})),!r.keepIsValid&&Se()},Ce=(e,r,n)=>{De(e,n);let s=o(p.current,e);const c=(e=>ce(e)||t(e))(r);if(r===s._f.ref||C&&Oe(s._f.ref)&&!Oe(r)||c&&Array.isArray(s._f.refs)&&a(s._f.refs).find(e=>e===r))return;s={_f:c?Object.assign(Object.assign({},s._f),{refs:[...a(s._f.refs||[]).filter(e=>Oe(e)&&document.contains(e)),r],ref:{type:r.type,name:e}}):Object.assign(Object.assign({},s._f),{ref:r})},I(p.current,e,s);const u=ke(e,n,r,!0);(c&&Array.isArray(u)?!q(o(p.current,e)._f.value,u):l(o(p.current,e)._f.value))&&(o(p.current,e)._f.value=de(o(p.current,e)))},De=r.useCallback((e,r)=>{const t=!o(p.current,e);return I(p.current,e,{_f:Object.assign(Object.assign(Object.assign({},t?{ref:{name:e}}:Object.assign({ref:(o(p.current,e)._f||{}).ref},o(p.current,e)._f)),{name:e}),r)}),be(r)&&I($.current,e,!0),A.current.add(e),t&&ke(e,r),Re?{name:e}:{name:e,onChange:Fe,onBlur:Fe,ref:t=>{t?Ce(e,t,r):(v||r&&r.shouldUnregister)&&C&&j.current.add(e)}}},[U.current]),Ee=r.useCallback((e,r)=>async t=>{t&&(t.preventDefault&&t.preventDefault(),t.persist&&t.persist());let n=Object.assign(Object.assign({},v?{}:U.current),T(p));O.current.next({isSubmitting:!0});try{if(H.current){const{errors:e,values:r}=await H.current(n,L.current,{criteriaMode:x,fields:te(A.current,p.current)});Z.current.errors=e,n=r}else await he(p.current);w(Z.current.errors)&&Object.keys(Z.current.errors).every(e=>o(n,e))?(O.current.next({errors:{},isSubmitting:!0}),await e(n,t)):(r&&await r(Z.current.errors,t),m&&P(p.current,e=>o(Z.current.errors,e),A.current))}finally{Z.current.isSubmitted=!0,O.current.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:w(Z.current.errors),submitCount:Z.current.submitCount+1,errors:Z.current.errors})}},[m,K,x]),Be=r.useCallback(({keepErrors:e,keepDirty:r,keepIsSubmitted:t,keepTouched:n,keepDefaultValues:s,keepIsValid:c,keepSubmitCount:u},i)=>{c||(M.current={},$.current={}),B.current=new Set,W.current=!1,O.current.next({submitCount:u?Z.current.submitCount:0,isDirty:r?Z.current.isDirty:!!s&&q(i,U.current),isSubmitted:!!t&&Z.current.isSubmitted,isValid:c?Z.current.isValid:!!Se(i),dirtyFields:r?Z.current.dirtyFields:{},touchedFields:n?Z.current.touchedFields:{},errors:e?Z.current.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},[]);return r.useEffect(()=>{const e=O.current.subscribe({next(e={}){_(e,Y.current,!0)&&(Z.current=Object.assign(Object.assign({},Z.current),e),X(Z.current))}}),r=F.current.subscribe({next(e){if(e.fields&&e.name&&Y.current.isValid){const r=T(p);I(r,e.name,e.fields),Se(r)}}});return H.current&&Y.current.isValid&&Se(),()=>{k.current.unsubscribe(),e.unsubscribe(),r.unsubscribe()}},[]),r.useEffect(()=>{const e=e=>!Oe(e)||!document.contains(e);N.current=!0,j.current.forEach(r=>{const t=o(p.current,r);t&&(t._f.refs?t._f.refs.every(e):e(t._f.ref))&&_e(r)}),j.current=new Set}),{control:r.useMemo(()=>({register:De,isWatchAllRef:W,watchFieldsRef:B,getIsDirty:ae,formStateSubjectRef:O,fieldArraySubjectRef:F,controllerSubjectRef:R,watchSubjectRef:k,watchInternal:we,fieldsRef:p,validFieldsRef:M,fieldsWithValidationRef:$,fieldArrayNamesRef:G,readFormStateRef:Y,formStateRef:Z,defaultValuesRef:U,fieldArrayDefaultValuesRef:E,unregister:_e,shouldUnmountUnregister:v}),[]),formState:S(D,Q,Y),trigger:ve,register:De,handleSubmit:Ee,watch:r.useCallback((e,r)=>ye(e)?k.current.subscribe({next:t=>e(we(void 0,r),t)}):we(e,r,!0),[]),setValue:r.useCallback((e,r,t={})=>{const n=o(p.current,e),s=G.current.has(e);s&&(F.current.next({fields:r,name:e,isReset:!0}),(Y.current.isDirty||Y.current.dirtyFields)&&t.shouldDirty&&(I(Z.current.dirtyFields,e,z(r,o(U.current,e,[]),o(Z.current.dirtyFields,e,[]))),O.current.next({dirtyFields:Z.current.dirtyFields,isDirty:ae(e,r)})),!r.length&&I(p.current,e,[])&&I(E.current,e,[])),n&&!n._f||s?xe(e,r,s?{}:t):ie(e,r,t,!0,!n),je(e)&&O.current.next({}),k.current.next({name:e,value:r})},[xe]),getValues:r.useCallback(e=>{const r=N.current?T(p,v?{}:U.current):U.current;return l(e)?r:ge(e)?o(r,e):e.map(e=>o(r,e))},[]),reset:r.useCallback((e,r={})=>{const t=e||U.current;if(C&&!r.keepValues)for(const e of A.current){const r=o(p.current,e);if(r&&r._f){const e=Array.isArray(r._f.refs)?r._f.refs[0]:r._f.ref;if(Oe(e))try{e.closest("form").reset();break}catch(e){}}}!r.keepDefaultValues&&(U.current=Object.assign({},t)),r.keepValues||(p.current={},R.current.next({values:Object.assign({},t)}),k.current.next({value:Object.assign({},t)}),F.current.next({fields:Object.assign({},t),isReset:!0})),Be(r,e),N.current=!1},[]),clearErrors:r.useCallback(e=>{e&&(Array.isArray(e)?e:[e]).forEach(e=>re(Z.current.errors,e)),O.current.next({errors:e?Z.current.errors:{}})},[]),unregister:r.useCallback(_e,[]),setError:r.useCallback((e,r,t)=>{const n=((o(p.current,e)||{_f:{}})._f||{}).ref;I(Z.current.errors,e,Object.assign(Object.assign({},r),{ref:n})),O.current.next({errors:Z.current.errors,isValid:!1}),t&&t.shouldFocus&&n&&n.focus&&n.focus()},[]),setFocus:r.useCallback(e=>o(p.current,e)._f.ref.focus(),[])}},exports.useFormContext=F,exports.useFormState=E,exports.useWatch=function(e){const{control:t,name:n,defaultValue:s}=e||{},c=F(),u=r.useRef(n);u.current=n;const{watchInternal:i,watchSubjectRef:a}=t||c.control,[o,f]=r.useState(l(s)?i(n):s);return r.useEffect(()=>{i(n);const e=a.current.subscribe({next:({name:e,value:r})=>(!u.current||!e||(Array.isArray(u.current)?u.current:[u.current]).some(r=>e&&r&&(r.startsWith(e)||e.startsWith(r))))&&f(ge(e)&&u.current===e&&!l(r)?r:i(u.current,s))});return()=>e.unsubscribe()},[]),o};
//# sourceMappingURL=index.cjs.js.map
